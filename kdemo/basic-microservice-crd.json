{
  "apiVersion": "apiextensions.k8s.io/v1",
  "kind": "CustomResourceDefinition",
  "metadata": {
    "name": "microservices.example.com"
  },
  "spec": {
    "group": "example.com",
    "names": {
      "kind": "Microservice",
      "listKind": "MicroserviceList",
      "plural": "microservices",
      "singular": "microservice",
      "shortNames": [
        "ms",
        "msvc"
      ]
    },
    "scope": "Namespaced",
    "versions": [
      {
        "name": "v1",
        "served": true,
        "storage": true,
        "schema": {
          "openAPIV3Schema": {
            "type": "object",
            "properties": {
              "spec": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "image": {
                    "type": "string"
                  },
                  "version": {
                    "type": "string"
                  },
                  "replicas": {
                    "type": "integer"
                  },
                  "resources": {
                    "type": "object"
                  },
                  "ports": {
                    "type": "array"
                  },
                  "environment": {
                    "type": "array"
                  },
                  "configMaps": {
                    "type": "array"
                  },
                  "secrets": {
                    "type": "array"
                  },
                  "healthCheck": {
                    "type": "object"
                  },
                  "networking": {
                    "type": "object"
                  }
                }
              },
              "status": {
                "type": "object",
                "properties": {
                  "phase": {
                    "type": "string"
                  },
                  "replicas": {
                    "type": "integer"
                  },
                  "availableReplicas": {
                    "type": "integer"
                  },
                  "readyReplicas": {
                    "type": "integer"
                  },
                  "conditions": {
                    "type": "array"
                  },
                  "endpoints": {
                    "type": "array"
                  }
                }
              }
            }
          }
        },
        "additionalPrinterColumns": [
          {
            "name": "Name",
            "type": "string",
            "jsonPath": ".spec.name"
          },
          {
            "name": "Image",
            "type": "string",
            "jsonPath": ".spec.image"
          },
          {
            "name": "Version",
            "type": "string",
            "jsonPath": ".spec.version"
          },
          {
            "name": "Replicas",
            "type": "integer",
            "jsonPath": ".spec.replicas"
          },
          {
            "name": "Phase",
            "type": "string",
            "jsonPath": ".status.phase"
          },
          {
            "name": "Age",
            "type": "date",
            "jsonPath": ".metadata.creationTimestamp"
          }
        ]
      }
    ]
  }
} 